<%= form_for(@ccr_performance_report) do |f| %>
  <% if @ccr_performance_report.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(ccr_performance_report.errors.count, "error") %> prohibited this ccr_performance_report from being saved:</h2>

      <ul>
      <% ccr_performance_report.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

<!-- <%= render 'form', ccr_performance_report: @ccr_performance_report %> -->
<ul class="nav nav-tabs">
  <li class="active"><a data-toggle="tab" href="#contract" aria-expanded="true">Contract</a></li>
  <li><a data-toggle="tab" href="#finals">Finalize</a></li>
  <li><a data-toggle="tab" href="#supplier">Supplier</a></li>
  <li><a data-toggle="tab" href="#costing">Costing</a></li>
  <li><a data-toggle="tab" href="#time">Time</a></li>
  <li><a data-toggle="tab" href="#admin">Admin</a></li>
  <li><a data-toggle="tab" href="#standards">Standards</a></li>
  <li><a data-toggle="tab" href="#quality">Quality</a></li>
  <li><a data-toggle="tab" href="#personnel">Personel</a></li>
  <li><a data-toggle="tab" href="#subcontractors">Subcontractors</a></li>
  <li><a data-toggle="tab" href="#communication">Communication</a></li>
  <li><a data-toggle="tab" href="#safety">Safety</a></li>
  <li><a data-toggle="tab" href="#environment">Environment</a></li>
  <li><a data-toggle="tab" href="#design">Design</a></li>
  <li><a data-toggle="tab" href="#overall">Overall</a></li>
  <li><a data-toggle="tab" href="#feedback">Feedback</a></li>
  <li><a data-toggle="tab" href="#approval">Approval</a></li>
</ul>


  <div class="tab-content">

    <div id="contract" class="tab-pane active in fade">
      <h1>Confirm contract details</h1>
      <div class="field">
        <%= f.label "VT contract reference" %>
        <!-- <%= f.text_field :contract_id, value: @contract.vt_contract_number %> -->
      </div>
      <div class="field">
        <%= f.label :contract_id %>
        <%= f.text_field :contract_id, value: @contract.id %>
      </div>
      <div class="field">
        <%= f.label "Contract Value" %>
        <!-- <%= f.text_field nil, value: @contract.vt_total_value  %> -->
      </div>
      <div class="field">
        <%= f.label "Contract Title" %>
        <!-- <%= f.text_field nil, value: @contract.vt_title  %> -->
      </div>
      <div class="field">
        <%= f.label "Contract Start" %>
        <!-- <%= f.text_field nil, value: @contract.vt_start_date  %> -->
      </div>
      <div class="field">
        <%= f.label "Contract End" %>
        <!-- <%= f.text_field nil, value: @contract.vt_end_date  %> -->
      </div>
      <div class="field">
        <%= f.label "Contract Description" %>
        <!-- <%= f.text_field nil, value: @contract.vt_contract_description  %> -->
      </div>
      <div class="field">
        <%= f.label "Supplier Name" %>
        <!-- <%= f.text_field nil, value: @contract.vt_supplier_name  %> -->
      </div>
      <div class="field">
        <%= f.label "Supplier ABN" %>
        <!-- <%= f.text_field nil, value: @contract.vt_supplier_abn  %> -->
      </div>
      <div class="field">
        <%= f.label "Supplier ACN" %>
        <!-- <%= f.text_field nil, value: @contract.vt_supplier_acn  %> -->
      </div>
      <div class="field">
        <%= f.label "Supplier Contact Person" %>
        <!-- <%= f.text_field nil, value: @supplier.name  %> -->
      </div>
      <div class="field">
        <%= f.label "Supplier Email" %>
        <!-- <%= f.text_field nil, value: @supplier.email  %> -->
      </div>
      <div class="field">
        <%= f.label "Supplier Phone" %>
        <!-- <%= f.text_field nil, value: "9999-9595"  %> -->
      </div>

      <h1>Confirm reporting details</h1>
      <div class="field">
        <%= f.label :reporting_officer_email %>
        <%= f.text_field :reporting_officer_email, value: @contract.vt_agency_email %>
      </div>
      <div class="field">
        <%= f.label :reporting_officer_name %>
        <%= f.text_field :reporting_officer_name, value: @contract.vt_agency_person %>
      </div>
      <div class="field">
        <%= f.label :contract_type %>
        <%= f.text_field :contract_type, value: "Contractor"  %>
      </div>
      <div class="field">
        <%= f.label "Department" %>
        <!-- <%= f.text_field nil, value: @department.name %> -->
      </div>
      <div class="field">
        <%= f.label :division %>
        <%= f.text_field :division %>
      </div>
      <div class="field">
        <%= f.label :contract_location %>
        <%= f.text_field :contract_location %>
      </div>
      <div class="field">
        <%= f.label :practical_completion_estimate %>
        <%= f.date_select :practical_completion_estimate, value: @contract.vt_end_date %>
      </div>
<!--
      <div class="field">
        <%= f.label :final_report %>
        <%= f.date_select :final_report, value: @contract.vt_end_date %>
      </div>
      <div class="field">
        <%= f.label :department_id %>
        <%= f.text_field :department_id, value: @contract.vt_department_id %>
      </div>
    -->
    </div>

    <div id="finals" class="tab-pane fade">
      <div class="field">
        <%= f.label :practical_completion %>
        <%= f.date_select :practical_completion, value: @contract.vt_end_date %>
      </div>
      <div class="field">
        <%= f.label :final_value %>
        <%= f.text_field :final_value, value: @contract.vt_total_value %>
      </div>
      <div class="field">
        <%= f.label :defects_liability %>
        <%= f.date_select :defects_liability, value: @contract.vt_end_date %>
      </div>
    </div>

    <div id="supplier" class="tab-pane fade">
      <div class="field">
        <%= f.label :supplier_id %>
        <%= f.text_field :supplier_id, value: @contract.vt_supplier_id %>
      </div>
      <div class="field">
        <%= f.label :supplier_name %>
        <%= f.text_field :supplier_name, value: @contract.vt_supplier_name %>
      </div>
      <div class="field">
        <%= f.label :supplier_email %>
        <%= f.text_field :supplier_email, value: @contract.vt_supplier_email %>
      </div>
    </div>

    <div id="costing" class="tab-pane fade">
      <div class="field">
        <h2>Costing</h2>
        <h4>The following should be considered:</h4>
        <h4>Timely Submission of Payment Claims.</h4>
        <h4>Accuracy of Payment Claims.</h4>
        <h4>Substantiation of Variations.</h4>
        <%= f.label "Final score" %>
        <%= f.number_field :score_cost %>
      </div>
    </div>

    <div id="time" class="tab-pane fade">
      <div class="field">
        <h2>Time Management</h2>
        <h4>Ability to meet approved programmed milestones.</h4>
        <h4>Planning, coordination and execution of activities in line with the construction program.</h4>
        <h4>Updating of the construction program to account for unforeseen delays.</h4>
        <h4>Timely allocation of appropriate resources to critical activities.</h4>
        <h4>Timely application to relevant authorities for statutory approvals.</h4>
        <%= f.label :score_time %>
        <%= f.number_field :score_time %>
      </div>
    </div>

    <div id="admin" class="tab-pane fade">
      <div class="field">
        <h2>Contract Administration</h2>
        <h4>The following should be considered:</h4>
        <h4>Accuracy of Supporting Evidence - Variations &amp; Extensions of Time.</h4>
        <h4>Compliance with the administrative requirements of the contract</h4>
        <h4>Compliance with the contract concerning timely requests for information</h4>
        <h4>Accuracy and timely submission of documents including, but not limited to, time programs, priced bill of quantities, drawings (including ‘as constructed’ drawings), progress reports, requests for extensions of time, notifications of latent conditions, cash flow projections, technical schedules, contract insurances, and bank guarantees</h4>
        <h4>Timely follow up action for superintendent’s instructions and request for variation quotations, including action items derived from site meetings.</h4>
        <%= f.label :score_admin %>
        <%= f.number_field :score_admin %>
      </div>
    </div>

    <div id="standards" class="tab-pane fade">
      <div class="field">
        <h2>Standard of Work</h2>
        <h4>The contractor’s standard of work will generally be measured against the requirements of the documentation.</h4>
        <h4></h4>
        <h4>To be considered prior to practical completion:</h4>
        <h4>Timely attendence to items on the Superintendent's Representative's defects list ('snag list').</h4>
        <h4>To be considered at practical completion:</h4>
        <h4>Conformance with specified performance requirements, including specified tolerances and finishes</h4>
        <h4>Amount of remedial work required, if any.</h4>
        <h4>To be considered after the defects liability period:</h4>
        <h4>Rectification of defects.</h4>
        <h4>Performance during the defects liability period, if applicable.</h4>
        <%= f.label :score_standards %>
        <%= f.number_field :score_standards %>
      </div>
    </div>

    <div id="quality" class="tab-pane fade">
      <div class="field">
        <h2>Quality Management Systems</h2>
        <h4>Quality systems will generally be measured against the specification and the contractor's quality system implementation including:</h4>
        <h4>Extent of the contractor's compliance.</h4>
        <h4>Results of quality audits for the project.</h4>
        <h4>Ability of the quality system to identify and deal with non-conformances and conditions adverse to quality.</h4>
        <%= f.label :score_quality %>
        <%= f.number_field :score_quality %>
      </div>
    </div>

    <div id="personnel" class="tab-pane fade">
      <div class="field">
        <h2>Personnel Management</h2>
        <h4>The contractor's ability to manage both on-site and off-site personnel to ensure co-operative and effective performance, including:</h4>
        <h4>Adequacy of the number of site personnel engaged by the contractor  to effectively carry out and progress the work;</h4>
        <h4>Management of site personnel</h4>
        <h4>Adherence to site rules and procedures, including maintenance of security at site</h4>
        <h4>Suitability of staff, management, administrative, technical or industry skills and overall experiences relevant to the tasks undertaken.</h4>
        <%= f.label :score_personnel %>
        <%= f.number_field :score_personnel %>
      </div>
    </div>

    <div id="subcontractors" class="tab-pane fade">
      <div class="field">
        <h2>Subcontractor Management</h2>
        <h4>The Contractor's ability to coordinate and manage both off-site and on-site subcontractors and suppliers to ensure effective performance. This includes:</h4>
        <h4>Timely delivery of goods and services.</h4>
        <h4>Timely completion of subcontract work.</h4>
        <h4>Ability to maintain effective and cooperative relationships with subcontractors.</h4>
        <h4>Compliance with contractual and legal obligations with respect to subcontractors and suppliers.</h4>
        <h4>Payment to all subcontractors and suppliers in accordance with legislation and contract conditions, and no adverse ‘spot check’ outcomes.</h4>
        <h4>Note:  A supplier who contracts with a client agency is accountable to the client agency  for the standards of performance, behaviour and ethical conduct of all the suppliers down the  contract chain.</h4>
        <%= f.label :score_subcontract %>
        <%= f.number_field :score_subcontract %>
      </div>
    </div>

    <div id="communication" class="tab-pane fade">
      <div class="field">
        <h2>Relationship Management &amp; Communication</h2>
        <h4>Relationship with Principal:</h4>
        <h4>In assessing the supplier’s relationship with the principal, superintendent’s representative, or departmental contract administration personnel, the following should be considered:</h4>
        <h4>Commitment to being a good corporate citizen.</h4>
        <h4>Adoption and commitment to principles of partnering with clients, sub suppliers, departmental appointed OHS consultant, and suppliers.</h4>
        <h4>Cooperation with other parties in the administration of contracts to enable them to fulfil their contractual obligations.</h4>
        <h4>Commitment to a non-adversarial approach to dispute resolution with arbitration or litigation reserved as a last resort.</h4>
        <h4>Commitment to timely resolution of issues through open and effective communication.</h4>
        <h4>Commitment to a co-operative working relationship with the principal / client agency.</h4>
        <h4>Number of instructions issued to the contractor under the contract  regarding relationship with principal / client agency.</h4>
        <h4>Relationship with community, client and other stakeholders:</h4>
        <h4>In assessing the contractor’s other relationships, the following should be considered:</h4>
        <h4>Commitment to being a good corporate citizen;adoption and commitment to principles of partnering with clients, sub suppliers, departmental appointed OHS consultant, and suppliers;</h4>
        <h4>Adequate complaints management process; including timely resolution of customer or community complaints.</h4>
        <%= f.label :score_communication %>
        <%= f.number_field :score_communication %>
      </div>
    </div>

    <div id="safety" class="tab-pane fade">
      <div class="field">
        <h2>Occupational Health, Safety</h2>
        <h4>In assessing the contractor's OHS and environmental performance, the following should be considered:</h4>
        <h4>Commitment to being a good corporate citizen.</h4>
        <h4>Compliance with obligations under the Occupational Safety &amp; Health act and regulations.</h4>
        <h4>Compliance with OHS issues specifically nominated in the contract, and compliance with OHS reporting requirements.</h4>
        <h4>Implementation and compliance with the site-specific hazardous materials, environmental management plans and safety management plans, as appropriate and site management requirements as appropriate.</h4>
        <h4>Number of infringement notices issued to the contractor relevant to the contract.</h4>
        <h4>Number of directions issues to the contractor concerning:</h4>
        <h4>1. safety;</h4>
        <h4>2. noise control;</h4>
        <h4>3. site control;</h4>
        <h4>4. soil erosion; and</h4>
        <h4>5. management of dust, dirt, water, refuse and fumes.</h4>
        <%= f.label :score_safety %>
        <%= f.number_field :score_safety %>
      </div>
    </div>

    <div id="environment" class="tab-pane fade">
      <div class="field">
        <h2>Environmental Management</h2>
        <h4>Where specified, compliance with the environmental requirements set out in the contract and other environmental obligations.</h4>
        <h4>Evidence of an environmentally-aware culture.</h4>
        <h4>Where specified, compliance with the project Environmental Management Plan, including audit results.</h4>
        <h4>Where specified, compliance with Environmental Impact Statement requirements.</h4>
        <%= f.label :score_environment %>
        <%= f.number_field :score_environment %>
      </div>
    </div>

    <div id="design" class="tab-pane fade">
      <div class="field">
        <h2>Contractors Design Documents</h2>
        <h4>Mandatory for the following contract strategies:</h4>
        <h4>Construct – also known as Design Development and Construct; and Design and Construct.</h4>
        <h4>Adequacy of documentation in meeting the requirements of the contract.</h4>
        <%= f.label :score_design %>
        <%= f.number_field :score_design %>
      </div>
    </div>

    <div id="overall" class="tab-pane fade">
      <div class="field">
        <h2>Overall Performance</h2>
        <h4>Weighting and Formula for determination of Overall performance - TO BE DECIDED</h4>
        <%= f.label :score_overall %>
        <%= f.number_field :score_overall %>
      </div>
    </div>

    <div id="feedback" class="tab-pane fade">
      <div class="field">
        <%= f.label :acceptance_name %>
        <%= f.text_field :acceptance_name, value: @contract.vt_supplier_name %>
      </div>
      <div class="field">
        <%= f.label :acceptance_email %>
        <%if @supplier.email == "" %>
          <%= f.text_field :acceptance_email, value: @contract.vt_supplier_email %>
        <% else %>
          <%= f.text_field :acceptance_email, value: @supplier.email %>
        <% end %>
      </div>
      <div class="field">
        <%= f.label :acceptance_status %>
        <%= f.number_field :acceptance_status %>
      </div>
    </div>

    <div id="approval" class="tab-pane fade">
      <div class="field">
        <%= f.label :executive_name %>
        <%= f.text_field :executive_name %>
      </div>
      <div class="field">
        <%= f.label :executive_email %>
        <%= f.text_field :executive_email %>
      </div>
      <div class="field">
        <%= f.label :executive_status %>
        <%= f.number_field :executive_status %>
      </div>
      <div class="actions">
        <%= f.submit %>
      </div>
    </div>

  </div>

<% end %>

<%= link_to 'Show', @ccr_performance_report %> |
<%= link_to 'Back', ccr_performance_reports_path %>
